## 一、基础类简答题

### 1.请说出数据仓库的四个特点并用自己的话加以解释说明。

答：数据仓库是面向主题的、集成的、相对稳定的、能反映历史变化的用来存储数据的仓库

​    面向主题是指存储数据的主要方向、是一种数据类别，包含的是某一领域的数据

​    集成性是指在数据源不一致，导致数据 格式不同的，再对其数据格式进行整合存储后数据仓库便是集成的

   相对稳定性是指数据仓库中的数据操作多为查找操作，增加和删除是较少的，只要定期加载更新

   反映历史变化是指数据仓库存储的数据一般是冗余的，全面的，能很好的记录各个阶段的信息

### 2.请说明为什么我们需要建设数据仓库（至少回答5点）。

`在没有数据仓库的前提下做数据分析，需要直接从业务数据库中提取数据。而直接从业务数据库取数据需要很多额外的调整，主要问题有：结构复杂，数据脏乱、难以理解、缺少历史、大规模查询缓慢`

- 集成性的特点，即能整合不同数据源的不同存储格式的数据，数据格式单一方便查询
- 历史数据的维护
-  数据有了统一的编码和描述，能减少或修正 坏数据问题，提高数据质量
- 能提供数据的单一通用数据模型，而不用关心数据源
- 重构数据，使数据对业务用户更有意义
- 开发决策型查询更简单

### 3.请讲一下常见的数据仓库架构有哪些？

答：数据集市架构、inmon架构、kimball架构、混合架构

### 4.请讲一下Kimball数据仓库架构包括哪些模块？

操作型系统模块：数据的来源，比如外部数据、业务系统中的数据和文档等

数据过渡区：把数据从操作型系统抽取到此处，进行存储、处理和转换

数据仓库：多维企业级数据仓库

最终用户端接口：将数据仓库中的数据提供到该接口 



### 5.请讲一下Inmon、Kimball两种数仓架构的特点，并阐述一下他们有什么区别？

区别：两种数仓架构的主要区别是核心数据仓库的设计和建立，Inmon架构更强调一致性、集中性和企业级数据模型、Kimball架构注重灵活性、快速迭代能力和维度模型

特点：inmon架构是自上而下建设架构，即从数据源开始逐步推进，更注重数据清洗，核心思想是以范式建模建模为基础的数仓分层；kimball架构是自下而上构架，即以业务为出发点，对既定的数据进行整理和拆分，核心思想是维度建模

`自上而下和自下而上不是指在数据层级的推进上，而是整体到部分的自上而下和自下而上`

### 6.请讲一下你们公司当前数据建设的情况、所处的阶段、存在什么样的问题。(可以按照课程里面的东西进行说明，选小型公司、中型公司、大型公司其中一个用自己的话阐述)

1. **背景**：初创公司，用户量大概几十万，像用户、订单、客服、财务、运营等管理系统都有，数据平台还没有，老板、运营、市场等还是看每周的数据报表了解数据指标，重复工作多、效率低

2. **前期**：建立数据开发团队，整理基本数据监控指标，做成数据平台一期，满足各部门基本数据需求。此时的数据指标相当于项目的体检指标，未对数据进行深层次的数据挖掘，对市场、运营的指导性不强，无法对决策提供支持。
   数据侧提出用户档案建立，方便分析人员做用户画像积累用户的行为数据，同时提出做APP的用户埋点，积累用户行为数据，方便做关联分析

3. **中期**：数据积累一个月，准备做数据平台二期，主要用于用户画像和用户行为分析。在这些需求下，平台反应时间变长、性能差、也经常出问题。之前用线上数据库，未做中间表之类的，考虑过做中间表进行优化，但后期还要做更多数据挖掘和数据分析工作，不如直接搞数据仓库专门支持数据平台和数据分析、数据挖掘的工作

4. **后期**：数据仓库设计（三层、两条线）

   1. 设计背景：线上APP功能和埋点数据的相关表，两个线上数据库
   2. 数仓底层基础表：从线上数据库提取数据（ETL），分为实时更新、日更新、月更新等，对基础表进行划分形成中间层的表
   3. 数仓中层中间表：数据分析平台支持的中间表、数据挖掘探索应用的中间表。至此本可支持数据平台和数据挖掘工作，但（建设数据前端表的原因：）表数据量大时，MySQL计算指标变慢。因此，对数据平台的计算结果和数据挖掘的相关数据都做了一层结果表，开发的话可以直接写接口调用表里的数据就行，数据平台的反应很快
   4. 数仓前端报表：数据分析平台展示的结果数据表、数据挖掘探索导入的变量数据表

   存在问题：
   
   - 每个业务都会建立自己的数据仓库，没有公共数据的汇总。随着业务业务增多，业务场景变复杂，会出现指标不统一等问题。
   - 不同业务间数据有交叉场景时，有数据重叠的情况



### 7.请介绍你知道几种数据模型以及其特点。 

#### 关系数据模型：

（面向事务处理系统OLTP）

**特点：**

1. 表格结构： 数据以表格（表）的形式组织，包含行和列。
2. **规范化：** 通常通过规范化来减少数据冗余，确保数据的一致性和完整性。
3. **关系：** 数据表之间通过关系（键）建立联系，主要通过主键和外键定义关系。
4. **SQL查询：** 结构化查询语言（SQL）通常用于查询和操作关系数据库。
5. **适用范围：** 适用于需要支持事务处理和复杂查询的应用，如在线事务处理（OLTP）系统。



#### 维度数据模型：

从不同的视角去分析数据（OLAP）

**特点：**

1. **星型/雪花模型：** 数据以星型或雪花模型的形式组织，包含一个中心的事实表和与之关联的维度表。
2. **维度：** 强调对业务实体（维度）的分析，如时间、地点、产品等。
3. **冗余度较高：** 通常容许冗余数据，以提高查询性能和简化报表设计。
4. **聚集：** 支持聚集（aggregation）操作，用于提供预先计算的汇总数据。
5. **适用范围：** 适用于决策支持系统（DSS）和数据仓库，主要用于分析和报告。

**比较：**

- **数据冗余：** 关系数据模型通常追求减少冗余，而维度数据模型允许一定程度的冗余以提高性能。
- **查询目的：** 关系数据模型主要用于事务处理，而维度数据模型主要用于分析和报告。
- **灵活性：** 关系数据模型更灵活，适用于多种业务需求，而维度数据模型专注于分析性查询和报表。

在实际应用中，这两种模型可能结合使用，特别是在数据仓库中。维度模型通常用于构建数据仓库的分析层，而关系数据模型可能用于支持数据仓库的操作层。

星型模型：模型结构向群星的形状，中间是一个事实表、周围是多个维度表，由事实表和维度表组成，一个星型模型可以有一个事实表和多个维度表。其中**事实表是定量的数据，维度表是对事实数据属性的描述**

雪花模型：对星型模型中的维度表进一步规范化得来的，当对所有的维度表完成规范化后，就形成以事实表为中心的雪花型结构。最重要的特点是能减少数据的冗余。

星座模型：维表共享，可被多个事实表关联使用。可看做星型模型的汇集。

### 8.请介绍一下第一、二、三范式。

第一范式：列中只含原子性指标

第二范式：满足第一范式、无部分依赖

第三范式：满足第二范式，无传递依赖

### 9.列举一下你使用过的逆范式化设计，并说明这样做的目的？

把数据冗余到多个表中，在查询时避免表之间的关联，就是用空间换时间

### 10.请说明一下维度建模的过程。

- 选择业务过程：下单
- 声明粒度：事实表中每行内容的总描述，像订单业务过程中的单笔订单
- 确认维度：可以用于分析的角度，用户、商品
- 确认事实：具体的数据，确认过程的度量是什么,具体如成交金额等

### 11.请举例说明一下星型模型、雪花模型、星座模型，并说明它们各自的优缺点。

- 星型模型
  - 定义：一个事实表（具体的数据）和多个维度表（对事实数据属性的描述）关联的模型
  - 优缺点：非规范化的，因此查询简便且迅速，没有复杂的表逻辑；数据完整性差
- 雪花模型(几级类目)
  - 定义：将星型模型进一步规范化，形成链路式的维表
  - 优缺点：规范化后能节省存储空间；增加查询的连接操作和复杂度

- 星座模型
  - 定义：在星型模型的基础上，维表被共享，供多个事实表关联使用


### 12.请说明一下你了解哪几种事实表？说说它们各自的特点和应用场景。（需要说出三种）

- 事务事实表：记录特定事务的事实表，保存的是**最原子的数据**，数据粒度是每个事务记录一条，事务被提交后被插入到事实表中便不再更改，更新方式**为增量更新**，如销售
- 周期快照事实表：以具有规律性的时间间隔记录事实，如每天、每月、每年（涉及状态类的都要用快照事实）（以时间周期为粒度）
- 累积快照事实表：给定时间点的聚合事实，完全覆盖一个事务或产品的生命周期的时间跨度，如当月的总销售金额（不是指标累积，是业务过程的累积）

订单表的分区是按下单时间戳进行划分的



### 13.维度设计过程中什么情况下需要进行维度整合？什么情况下需要进行维度拆分？（需要举场景案例）

维度整合：数据来源系统较多时，表名、字段名不统一时维度表可以将这些统一。公共代码或编码值统一，如性别分别用字母、数字表示的差异。业务含义相同的表统一。

维度拆分：

- 水平拆分：某些维度需要单独处理或不常用时，可以将该维度拆分出来。例如旅航商品和普通商品相比，有较为常用的公共属性建立一个，把一些特有属性或不常用的属性建立一个子维度表。
- 垂直拆分：我的理解是直接按列进行拆分，依据维度属性产出的时间/热度从主维表进行垂直拆分？？？

### 14.如何处理缓慢变化维度？（需要举场景案例）

`缓慢变化维度一般用在维度建模中，针对dim表的维度建模`

数仓的重要特点之一是反映历史变化，缓慢变化维度，缓慢是跟事实表相对的。处理缓慢变化维度的方法一般有五种

- 原样保留或重写：在数据正确且无需考虑历史变化的维度的情况下，直接update即可
- `增加新行`：自然键第一次出现时，新增一行数据，create为业务系统的创建时间，update为9999-12-31；维度发生变化时，当前自然键的update刷新最新时间，新增一行记录，记录最新的数据，create为最新时间，update为9999-12-31
- 新增属性：当分析伴随着新值或旧值的变化前后记录的事实时，可添加维度列。将事实变化转化为维度变化。例如公司对部门的方位定义为东南西北四个方位，现想要对部门方位进行精细化到东南部、东北部等八个方位，便可直接新增维度列记录精细化后的部门方位。
- 快照存储：每个周期定时保存数据，此方法会产生冗余数据
- `历史拉链存储`：可维护历史状态及最新数据状态的一种表。此方法由新建维度行的方法衍生而来，不同点是拉链存储使用两个时间键，来替代原有代理键

### 15.请描述一下数仓建模的基本流程。

- 定义范围
- 确定需求
- 逻辑设计
- 物理设计
- 数据处理
- 数据访问与维护

### 16.在数据处理的各个阶段，你使用过哪些工具。

数据同步：datax

数据抽取：flume

数据存储：Hadoop 、Hbase

数据计算：hive、spark

### 17.数据质量包括哪些方面？（需要答全4点）

- 完整性：数据记录和信息是否完整，是否存在缺失情况。数据缺失主要包括`记录的缺失和记录中某个字段的缺失`都会造成统计结果的不准确
- 准确性：数据中记录是否准确，是否存在异常或错误信息。比如订单出现确认收货金额为负值等，必然是有问题的
- 一致：体现在跨度很大的数据体系中，同一份数据保持一致性(口径是否相同-->数据来源是否一致-->数据存储是否一致)
- 及时：保证数据的及时产出

方法：

按划分层次去讲，表级别的、字段级别的监控。数据的重复记录、单位不统一、数据缺失等

自定义sql的，按照某种规则进行监控

### 18.请简要说你日常的数仓开发工作涉及到哪些流程节点（与哪些人交互、会做哪些工作）。



### 19.什么是DQC？举例说明它的核心作用有哪些？

DQC是数据质量检测，数据质量控制（Data Quality Control，简称DQC）是一种组织和管理数据质量的过程，旨在确保数据在整个数据生命周期中保持高质量。数据质量是指数据的准确性、完整性、一致性、及时性和可靠性等方面。数据质量控制的核心目标是识别、纠正和预防数据质量问题，以确保数据的可信度和可用性。

以下是数据质量控制的核心作用：

1. **数据准确性：** 确保数据是准确的，没有错误或不一致性。这包括验证数据的正确性、精确性和可靠性。

2. **完整性：** 确保数据集完整，不缺失任何必要的信息。检查数据是否包含所有必需的字段和记录。

3. **一致性：** 确保数据在不同的存储位置或系统中是一致的。防止不同系统中的数据冲突或矛盾。

4. **及时性：** 确保数据及时更新，不过时。及时更新数据对于支持实时业务决策非常重要。

5. **可靠性：** 确保数据的可靠性和可信度。可靠的数据支持组织在决策和分析中的信任度。

数据质量控制通常包括以下步骤：

- **数据收集：** 收集原始数据，可以是从各种来源如数据库、文件、API等获取。

- **数据清洗：** 检测和纠正数据中的错误、缺失、重复或不一致的部分。

- **数据验证：** 验证数据的准确性和一致性，确保符合预定的数据质量标准和规则。

- **监控：** 实时监控数据质量，及时发现和解决潜在的问题。

- **报告和分析：** 生成数据质量报告，分析数据质量趋势，为改进提供依据。

通过数据质量控制，组织可以确保其在各种业务流程和决策中使用的数据是可信赖的，从而提高运营效率、降低风险，并支持更好的业务决策。

`DQC 提供常用的规则模板，包括表行数较 N 天前波动率、表空间大小较 N 天前波动率、字段最大/最小/平均值相比 N 天前波动率、字段空值/唯一个数等。DQC 的检查也可以通过运行 SQL 任务实现。`



### 20.什么是SLA？请说明它的应用场景。

SLA 是服务水平协议（Service Level Agreement）的缩写，是一种正式的文件，定义了服务提供商与客户之间关于服务水平的一致协议。

SLA 的目的是在服务提供商和客户之间建立透明、可测量的关系，确保双方都明确了期望，并有明确的责任和义务。SLA 可以为双方提供一种框架，用于评估服务质量、解决问题，并在需要时提供补偿或奖励。 

1. **云服务：** 在云计算中，服务提供商通常与客户签订 SLA，明确了云服务的性能、可用性、数据安全等方面的承诺。这有助于客户了解他们可以期望的服务水平，并为可能发生的问题做好准备。
2. **IT服务：** 在企业中，IT服务通常会与业务部门或其他团队签订 SLA。这可以包括网络可用性、系统响应时间、故障恢复时间等。通过明确这些协议，IT服务提供商可以提高其服务的可靠性，同时也为客户提供了明确的期望。
3. **电信服务：** 电信公司通常与客户签订 SLA，规定了网络服务的性能、带宽、故障修复时间等。这有助于确保通信服务的可靠性和稳定性。
4. **外包服务：** 在外包关系中，委托方与服务提供商签订 SLA，规定了外包服务的质量、交付时间、合规性等。这有助于确保外包服务的高效和符合标准。
5. **在线服务：** 在线服务提供商，如社交媒体平台、电子商务网站等，通常与用户签订 SLA，规定了服务的可用性、隐私保护、数据安全等方面的协议。

数据开发人员跟业务开发人员定sla，业务变动、迁移等都要告知我们，因为我们是下游。



### 21.你们公司怎么做数据任务监控的，有没有什么机制或者工具来保障？  



## 二、进阶类简答题

### 22.什么是OneData?

OneData 阿里巴巴中对数据进行整合规范管理的工具和方法。维度建模思想。

`数据模型的维度设计主要以维度建模理论为基础，基于维度数据模型总线架构，构建一致性的维度和事实`

### 23.请用自己的话说明一下什么是总线矩阵，它的核心点在哪里？

在某一数据域中概括包含哪些业务过程，再确定业务过程与哪些维度有关。业务过程是否能从某种维度去分析利用。

对数据结构框架有更清晰的认知，能很容易看出某业务过程包含哪些通用维度

### 24.怎么做维度设计？

- 在架构设计中明确了总线矩阵，掌握了具体的维度，此时选择或者新建一个维度
- 确定主维表，主维表一般是ods层表，直接与业务系统同步
- 确定相关维表，数仓中的表本身存在较强的关联性，可根据业务梳理，确认那些表和主维表存在关联关系，并选择其中的某些表用于生成维度属性
- 确定维度属性：从主维表中选择维度属性或生成新的维度属性、从相关维表中选择维度属性或生成新的维度属性


### 25.请解释一下为什么要做数据仓库的分层设计？

- 用空间换时间，即对数据进行大量的预处理能很好提升数据使用者的效率，减少重复开发
- 通过数据分层能很好的简化数据清洗过程，相当于是对清洗过程的拆分，使数据清洗结构步骤更清晰，很好的降低了数据清洗的难度
- 清晰数据结构使数据关系条理化：每层数据有对应作用域，使用数据时更方便定位和理解
- 数据血缘追踪：若提供的数据异常，可通过血缘关系追踪数据源
- 屏蔽原始数据的影响


### 26.谈谈你对ods层、dwd、dws、ads的理解。你们公司的数仓是怎么做分层的？

ods层：数据贴源层，几乎不做处理。从业务系统中提取数据且避免对系统数据产生影响，建立的数据存储层

dwd层：根据业务过程构建的最细粒度的明细事实表，最某些重要字段做宽表化处理

dws层：以分析的主题对象为建模驱动，基于上层应用和产品的指标需求，构建公共粒度的汇总指标表。以宽表化手段物理化模型，构建命名规范、口径一致的统计指标，为上层提供公共指标，建立汇总宽表、明细事实表。

ads层：数据应用层主要针对数据汇总层进行相关指标的组合，生成报表等供数据分析或数据挖掘使用

### 27.你们公司对于指标怎么进行管理的？请分享一下在做维度设计、指标设计过程中的一些经验。

避免同名不同义、同义不同名等问题

### 28.请说说数仓主题的划分原则。

- 按照业务或者业务过程划分：即按照功能模块或业务线或企业的业务活动事件划分主题域
- 按照数据域划分：数据域是面向业务分析，将业务过程或维度进行抽象的集合。业务过程可概括为一个个不可拆分的行为事件，业务过程下可定义指标，维度是指度量的环境

### 29.请说说数据模型设计过程中需要遵循哪些基本原则？

- 高内聚、低耦合：主题内部高内聚、主题间低耦合
- 核心模型和扩展模型要分离:核心模型内有核心字段支持核心业务，扩展模型中的字段支持个性化或少量应用的需要，这样模型的架构更加简洁，更容易维护
- 公共处理逻辑下沉及单一：更底层公用的处理逻辑在数据调度依赖的底层进行封装与实现且不让公共逻辑多处同时存在
- 成本与性能平衡：适当数据冗余可换取查询和刷新性能，不宜过度冗余与数据复制
- 数据可回滚：处理逻辑不变，不同时间多次运行数据结果确定不变
- 一致性：不同表中的 相同含义的字段命名必须相同
- 命名清晰、可理解

### 30.请举例说说数仓层次调用的过程中需要遵循哪些基本的规范？

不能跨层引用、引用穿透，可以同层引用。dws层不能引用ods层，dwd层可以引用dwd层。但是ads层不能引用ads层。

- ODS层数据不能直接被应用层任务引用
- CDM层任务的深度不宜过大
- 一个计算刷新任务只允许一个输出表，特殊情况除外
- CDM汇总层优先调用CDM明细层，可累加指标计算。CDM汇总层尽量优先调用已经产出的粗粒度汇总层，避免的大量汇总层数据直接从海量的明细数据层中计算得出
- CDM明细层累计快照事实表优先调用CDM事务型事实表，保持数据的一致性产出
- 有针对性的建设CDM公共汇总层，避免应用层过度引用和依赖CDM层明细数据

## 三、项目类简答题

### 31.请介绍一下电商中常见的用户指标、流量指标、搜索指标、商品指标、订单交易指标。【每类指标至少回答4个，每个0.5分，合计0.5*4*5=10分】

用户指标：年龄、性别、地址、历史成交订单数、注册用户数

流量指标：tab的曝光uv/pv、tab的点击pv/uv、页面点击uv/pv、页面曝光uv/pv、商详页uv/pv

搜索指标：搜索曝光uv/pv、搜索有结果pv/uv、搜索无结果pv/uv

商品指标：商品数量、下单人数、下单数量、支付人数、支付金额

订单交易指标：下单数量、下单人数、下单金额、成交数量、成交人数、成交金额

广告收费的方式也是指标，是成本指标

### 32.请简要描述一下什么是用户画像？用户画像通常包括哪些数据？【6分】

对用户行为的汇总抽象而成的数据模型，多个数据模型组合便形成用户画像

用户画像主要包括用户基本数据（年龄、性别、职业）、电商交易数据（客单价、交易率、支付）、电商行为数据（搜索、收藏、加购 ）

`用户的种类：算法类的标签/预测类的标签/数据挖掘的标签`

`通过收集用户的个人信息，结合他在APP内的行为，使用统计和算法规则建设的一套标签体系就是用户画像`

### 33.请简述一下用户下订单路径，并且说明一下在各个环节涉及到哪些数据？

用户下订单路径：搜索、商品页、商详页、加入购物车、收藏、下单、付款、购买完成页面

商品信息：商品id、商品名称、商品图片

基本信息：订单号、订单时间、订单类型

支付信息：支付时间、支付方式、优惠券的使用

发票信息：是否开发票、发票类型

物流信息：物流状态、地址节点信息

### 34.请讲一下电商业务架构的核心模块、并简述一下电商业务系统的核心流程。

电商业务架构有用户、商品、商家、交易、营销五大模块。（三个角色：供应商、电商平台、消费者）

采购流程：从供应商处采购产品，包括供应商选择、供应商入驻、供应商管理、采购管理、结算管理等

仓库流程：将采购产品入仓存储管理，包括入库、库内管理、库存管理等

销售流程：将产品上架到电商平台进行售卖，包括spu、sku、定价、促销等

配送流程：更具订单进行履约的过程，包括库存管理、配送路线信息等

### 35.请说一下你在做交易数据过程中核心用到的数据表有哪些？

订单表：订单信息表，字段描述的为订单相关信息，包括订单id，创建时间、订单总额等

订单项表：描述订单上个商品的信息表，包括sku相关字段、spu相关字段、优惠券相关字段等

支付信息表：包括订单id、支付总金额、支付状态、创建时间等

退款信息表：包括退款订单、退款金额、退款状态、退款渠道

### 36.请用自己的话介绍一下商化项目的业务背景和技术背景，项目中核心的业务过程、项目整体架构，并对每个主题域的数据建设做简要说明。【重点回答】

- 业务背景：电商行业正处在高速增长期，在竞争激烈的情况下**需要创新和差异化来提高用户体验和市场份额**，同时**满足管理层的决策支持**，为**业务人员提供数据支持**，如一些可视化看板等，也**为商家的运营决策提供数据支持**，如一些用户构成、新老客户占比、复购分析等
- 技术背景：用户、商品、商家、交易、营销五大主题域建设。
- 项目的核心业务过程包括用户来源、流量、转化、复购。用户来源是指APP的获客渠道有哪些、流量即用户的浏览页面，如首页、商品页、商详页等、转化指用户浏览转化为收益的比例，用户的交易行为进行到哪一步，如下订单、成交等
- 项目整体架构：项目主要确定用户、商品、商家、交易、营销五大数据域，并在相应数据域中拆分出业务过程并确定其维度（一致性维度、非一致性维度）
- 各主题域的简要说明：
  - 用户主题域：用户的信息数据、用户的行为数据
  - 商品：sku、spu信息、商品的分类信息、商品的品牌信息、商品的地区信息
  - 商户：商家的店铺信息、商家的商品信息
  - 交易：订单信息、订单项信息、退款表
  - 营销：优惠券基础信息表、优惠券的分类



### 37.请结合用户或者交易主题域的数据建设情况，阐述一下维度建模的具体流程。

以用户主题域建设为例，维度建模的具体流程为：

- 明确需求：跟业务方或其他团队进行沟通
- 确定业务过程：用户主题域的核心业务主要包括用户登录、用户浏览、收藏操作、购买
- 声明粒度：日期与用户粒度，日期、用户与商品粒度的数据
- 确认维度：日期、商品、用户
- 确认事实： 浏览人数/次数，收藏人数/次数等



### 38.请结合商品主题域的数据建设情况，阐述一下你对维表建设的思路。

- 选择或新建维度：在建设维度表的过程中，要保证其在数仓中的唯一性
- 确定主维表：确定主维表的来源，一般就是ods层的商品表
- 确定相关维表：数据仓库的设计遵循数据的高度整合原则
- 确定维度属性：在维度主来源表+相关维表的基础字段上，创建或补充维度属性



### 39.请以交易主题域的数据建设为例，讲一下数仓分层是怎么做的，每一层分别有哪些数据表和字段。

数据交易域主要有下单、支付、退款等业务过程

ods层：

- 贴源层，基本上不做处理，
- 存储的多为基础 信息表，如订单表、订单项表、商品表等

dwd层：

- 会把不同业务过程中的数据串联起来，做成一张宽表
- 将订单表和订单项表进行左关联生成订单项明细事实表，将订单表和退款表关联生成订单信息明细事实表

dws层：

- 汇总层，搭建项目中常用的指标，对dwd层的数据进行聚合汇总
- 商品统计汇总表、用户交易行为汇总表、用户交易地区汇总表

ads层：

- 根据需求来定义
- 不同时间段内订单统计汇总表、不同时间段内不同地区的订单统计汇总表



## 四、答辩

交易业务过程的下单过程的粒度：下单子订单id粒度，即sku_id粒度，方便退货、逆过程。

确定事实：是确定可度量的事实，数值类的指标，比如购买商品的数量、GMV

1. 维度退化：将维度表的属性退化到事实表里，是为了重复利用？如何退化：根据需求？不太懂。`退化的是业务经常分析的维度属性`
2. 从业务数据库到ods层的数据提取具体怎么做？如果面试被问到如何回答？